# Modan2 UI 테스트 계획

## 작성일: 2025-08-29

## 1. 목표

`Modan2.py`의 핵심적인 사용자 인터페이스(UI) 상호작용을 자동화된 테스트로 구현하여, 향후 진행될 대규모 리팩토링 시 발생할 수 있는 기능 회귀(regression)를 사전에 방지하는 안전망을 구축한다.

`pytest-qt` 라이브러리를 사용하여 UI 상호작용을 시뮬레이션하고 결과를 검증한다.

---

## 2. 테스트 계획 (3단계)

### **1단계: 기본 동작 및 상태 검증 (Smoke Test)**

애플리케이션의 가장 기본적인 기능들이 정상적으로 작동하는지 확인하여, 실행 가능한 상태인지 빠르게 검증한다.

1.  **메인 윈도우 생성 테스트**: `ModanMainWindow`가 오류 없이 성공적으로 생성되는지 확인한다.
2.  **초기 상태 테스트**:
    *   앱 초기 실행 시, 데이터셋이 선택되지 않았으므로 '새 객체 추가', '분석' 등의 핵심 액션(버튼)이 비활성화 상태인지 확인한다.
3.  **상태 변경 테스트**:
    *   테스트 코드로 트리 뷰에서 특정 데이터셋을 선택했을 때, 비활성화되었던 '새 객체 추가', '분석' 등의 액션이 활성화 상태로 올바르게 변경되는지 확인한다.

### **2단계: 핵심 기능 경로(Happy Path) 테스트**

사용자가 가장 많이 사용하는 주요 기능들이 성공적으로 동작하는 시나리오를 테스트한다. 테스트 속도 유지를 위해, 시간이 오래 걸리는 실제 분석 연산 등은 모킹(mocking)하여 가짜 결과를 반환하도록 만든다.

1.  **새 데이터셋 생성**:
    *   '새 데이터셋' 액션을 실행하고, 나타나는 다이얼로그에 정보를 입력했을 때, 좌측 트리 뷰에 새로운 데이터셋 항목이 추가되는지 검증한다.
2.  **객체(파일) 가져오기**:
    *   특정 데이터셋을 선택한 상태에서, 테이블 뷰로 이미지나 3D 모델 파일을 드래그 앤 드롭하는 상황을 시뮬레이션한다.
    *   테이블 뷰에 새로운 객체 정보가 추가되는지 검증한다.
3.  **분석 실행**:
    *   '분석' 액션을 실행하고, 분석 설정 다이얼로그에 정보를 입력했을 때, 트리 뷰의 해당 데이터셋 하위에 새로운 분석 결과 항목이 생성되는지 검증한다. (실제 통계 연산은 모킹 처리)
4.  **객체 선택 및 뷰어 확인**:
    *   테이블 뷰에서 특정 객체를 선택했을 때, 우측의 2D/3D 뷰어에 해당 객체의 정보(랜드마크 등)가 올바르게 표시되는지 검증한다.

### **3단계: 다이얼로그 상호작용 테스트**

각종 설정 및 정보 다이얼로그가 정상적으로 동작하는지 검증한다.

1.  **환경설정 다이얼로그**:
    *   'Preferences' 메뉴를 실행하여 다이얼로그를 연다.
    *   'Toolbar Icon Size' 같은 설정을 변경한 후, 실제 메인 윈도우의 툴바 아이콘 크기가 변경되었는지 확인한다.
2.  **정보(About) 다이얼로그**:
    *   'About' 메뉴를 실행했을 때, 정보 다이얼로그가 정상적으로 나타나는지 확인한다.

---

## 3. 기대 효과

-   **리팩토링 안정성 확보**: 코드 구조를 변경하더라도 UI 기능의 정상 동작을 보장할 수 있다.
-   **개발자 자신감 향상**: 테스트가 안전망 역할을 하므로, 과감한 개선 작업을 시도할 수 있다.
-   **회귀 버그 방지**: 새로운 기능 추가 시 기존 UI 기능에 미치는 영향을 사전에 파악할 수 있다.
